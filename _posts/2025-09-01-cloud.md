---
layout: post
title: AWS labs
categories: [AWS security]
tags: [Cloud PT,AWS]
date: '2025-09-01 15:05:45 +0530'
---

### Prerequisites 

Kali VM machine 

AWS Account with Free tier

The default policy arn:aws:iam::aws:policy/ReadOnlyAccess



### Lab Setup – Guide Summary: Creating a Free AWS Account

To start building your AWS pentesting lab, follow these steps to create a **free-tier** AWS account:

1. Go to aws.amazon.com/free and click **Create a Free Account.**
2. Enter your root email and account name, then verify your email.
3. Set a secure password for the root user.
4. Choose “Personal” as your account type and fill out your personal details (name, address, etc.).
5. Enter your credit/debit card info (AWS may charge a few cents to verify, but usage will remain free).
6. Verify your identity with a phone number and CAPTCHA.
7. Choose the Free Support Plan (don’t select Developer or Business).
8. Click **Complete Sign Up** — you're done!

### Setting up Budget Alerts

1. **Log in** to your AWS account.
2. In the **top search bar**, type **“Budgets”** and click on the **Budgets** service.
3. Click **“Create a budget.”**
4. Choose **“Cost budget”** and set a **zero-dollar ($0.00)** budget.
5. For email alerts, enter your preferred email address (e.g., prathampoojari1@gmail.com,test@gmail.com). You can add multiple addresses separated by commas.
6. Click **“Create budget.”**

## **Steps to Install AWS CLI (on Kali or similar Linux):**

1. Visit the official AWS CLI install page:[Install the AWS CLI on Linux](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-linux.html)
2. Copy the installation command.
3. Paste it into your Kali terminal (Ctrl + Shift + V)
4. Verify with: `aws --version`

or else paste this command on the terminal :- 

```shell-session
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install --bin-dir/usr/local/bin --install-dir/usr/local/aws-cli --update
```

## Enabling Autocomplete for the AWS CLI

Step 1: Run this command to modify your **~/.zshrc** file.

```shell-session
`echo -e '\nexport PATH=/usr/local/bin/:$PATH\nautoload bashcompinit && bashcompinit\nautoload -Uz compinit && compinit\ncomplete -C "/usr/local/bin/aws_completer" aws' >> ~/.zshrc`
```

Step 2: Reload the profile
```shell-session
`source ~/.zshrc`
```

Step 3: Verify command completion. You can do this by typing a partial command and pressing Tab to see available commands.`aws s[Press Tab]`**

## Setting Up CloudGoat for AWS Pentesting

Step 1: Meet the Requirements

Before setting up CloudGoat, make sure you’re using a Kali Linux VM (or another supported OS like macOS), and that you have the following tools installed:

- Python 3.9 or higher
- AWS CLI
- Terraform
- jq (a command-line JSON parser)
- pipx (for Python package isolation)

If any of these are missing, install them using your package manager or from the official sources.

---

Step 2: Install Terraform

- Go to terraform.io/downloads and download the Linux AMD64 binary.
- Unzip it, then move the binary to your `/usr/local/bin` directory so you can run `terraform` from anywhere in your terminal.

---

Step 3: Install CloudGoat

- Use pipx to install CloudGoat directly from GitHub.
- The pipx command will install the latest version and manage it in an isolated environment.

`pipx install git+https://github.com/RhinoSecurityLabs/cloudgoat.git`

---

Step 4: Create an IAM User in AWS**

- Log into your AWS account and go to the IAM section.
- Create a new user (you can name it `cloudgoat`) and **do not enable console access**.
- Attach the **AdministratorAccess** policy directly to the user.

---

Step 5: Generate Credentials

- After creating the user, go to the “Security credentials” tab and create a new **Access key**.
- Copy both the Access Key ID and Secret Access Key.

---

Step 6: Configure the AWS CLI Profile

- In your terminal, run the `aws configure` command and specify a profile name like `cloudgoat`.
- Paste in your Access Key and Secret, use `us-east-1` as the region, and choose `json` as the output format.

---

Step 7: Link CloudGoat to Your AWS Profile

- Run the CloudGoat configuration tool and set the AWS profile you just created.
- This allows CloudGoat to deploy and destroy resources in your account.

---

Step 8: Whitelist Your IP Address

- CloudGoat limits access to vulnerable services it deploys by only allowing your IP.
- Run the command to whitelist your current IP so you’re the only one with access to public-facing resources.

`cloudgoat config whitelist --auto`